\documentclass[working]{tuftebook}
\input{preamble-gilles.tex}
\usepackage{pdfpages}

\usepackage{lipsum}
\usepackage{parskip}
\usepackage{titletoc}

\usepackage{cmbright}
\usepackage{bm}

\title{Rapport - Read-out Noise, Dark Charge og Signal to Noise Ratio i Princeton Instruments CCD-kamera.}
\author{Albert Lunde, Tinus Blæsbjerg}
\date{Academic year 2020--2021}

\begin{document}
\maketitle
\pagestyle{fancy}
\tableofcontents
\chapter*{Problemformulering}
Vi vil i denne rapport undersøge billeder taget af et CCD Camera fra Princeton Instruments, med henblik på at bestemme kameraets read-out-noise til forskellige indstillinger. I forlængelse af dette, vil vi kigge på, hvordan forholdet er mellem de forskellige read-out-noises, og den usikkerhed der forbundet med den målte poissonfordelte data. Dette vil vi så bruge til at vurdere kameraets kvalitet. Hvis vi bliver færdig med overstående i god tid, vil vi også kigge på, hvordan dark charge giver anledning til mere støj.

\chapter*{Teori}
I denne del beskriver vi teorien bag \textbf{read-out noise}, \textbf{dark charge} og \textbf{signal to noise ratio}. Vi beskriver desuden de statistiske metoder vi har brugt til at beregne usikkerheden på disse størrelser.
\section{Read-out Noise}
\begin{marginfigure}
    \centering
    \incfig{read-out-noise}
    \caption{Read-out-noise: Hver pixel læses lineært af kameraet. Først tømmes øverste række, derefter rykkes næste kollonne op.}
    \label{fig:read-out-noise}
\end{marginfigure}
Et CCD er opbygget af et gitterværk af elektriske brønde. Hver af brøndene svarer til én pixel på det endelige billede som kameraet giver. Når én af disse brønde rammes af en foton, omdanner brønden denne foton til elektrisk ladning. Desto flere ladninger der rammer brønden des større ladning. Når shutteren i kameraet lukkes, oversætter den nu disse ladninger i brøndene til en lysstyrke svarende til størrelsen af ladningen.
\\
\subsection{Hvad er Read-out Noise?}
Hvad er read-out noise konkret? Ideelt set, så burde to billeder taget med de samme indstillinger være identiske, men dette er ikke tilfældet, hvilket man ville kunne se, hvis man sammenlignede en masse billeder med hinanden. Denne variation i billederne er essensen af read-out-noise, fordi hvis der ingen støj var, så ville billederne netop være ens. Så hvis man estimere denne usikkerhed, så kan man fraregne den fra ens faktisk data, og på den måde få bedre data. 
\\
Hvordan beskriver vi denne støj? Man kan ikke estimere den udfra et billede, men hvis vi har to billeder, som vi kan sammenligne, så kan vi finde ud af, hvad differencen mellem de to billeder er, hvilket vi kan bruge til at estimere, hvad støjen på et billede er. Det skyldes, at når vi kigger på differencen mellem de to billeder, så propagerer vi fejlen fra de enkelte billeder gennem en multivariabel funktion, som vi godt kan finde fejlen på. 
Dette kan fx gøres ved at bruge den calculus-baseret approksimation for en multi-variabel funktion. Funktionen er givet ved:
\[
Z = A - B
.\] 
Fejlen estimeres vha. følgende udtryk:
\begin{align*}
	(\alpha_Z)^2&=\left|   \frac{\partial Z}{\partial A}\right|^2(\alpha_A)^2+\left|   \frac{\partial Z}{\partial B}\right|^2(\alpha_B)^2 \\
	\alpha_Z&=\sqrt{(\alpha_A)^2+(\alpha_B)^2}
.\end{align*}
Fejlen på Z kan nemt beregnes i praksis, fordi man har en masse datapunkter, som man kan finde både middelværdi og spredningen på.
\\
Fejlen på A og B må nødvendigvis være den samme, da de pga samme kameraindstillinger , må komme fra den samme statistiske fordeling. Derfor kan man omskrive udtrykket:
\begin{align*}	
	\alpha_Z&=\sqrt{2(\alpha_A)^2} \\
	\alpha_Z&=\sqrt{2}\cdot \alpha_A \\
	\alpha_A&=\frac{\alpha_Z}{\sqrt{2}}
.\end{align*}

Read-out noise er jo netop den flukturation omkring hvert datapunkt, der gør, at det samme datapunkt på to seperate billeder kan have forskellige værdier. Så et godt estimat for denne støj, vil være spredningen omkring hvert datapunkt. Vi har vist at denne spredning kan findes, hvis man kigger på fejlen i Z. Men fejlen i Z stammer jo også fra den tilfældige flukturation associeret ved støjen af to billeder, derfor er spredningen af Z netop også et godt estimat for fejlen på Z. Med disse antagelser kan vi omskrive udtrykket fra før:
\begin{align*}
	noise&=\frac{\sigma_{Z}}{\sqrt{2}} 
.\end{align*}

Pr. konstruktion af forsøget er der taget 10 billeder med hver indstilling, hvilket betyder, at man kan tage differencen parvis for alle kombinationer af de 10 billeder. Dette giver en masse middelværdier for read-out noise, som vi kan tage middelværdien, for at få et godt estimat af hvad den faktiske read-out noise for et sæt af specifikke indstillinger er. Vi ved, at når vi tager middelværdien af noget data, så er der en usikkerhed forbundet med denne middelværdi, som er givet ved:
\begin{align*}
\alpha = \frac{\sigma_{N-1}}{\sqrt{N}}
\bar{x}\pm \alpha
.\end{align*}
\section{Plotning af data}
Efter vi har beregnet vores read-out noise til forskellige indstillinger, så skal vi også have tolket på vores data. Den bedste måde at gøre dette på, er selvfølgelig ved at plotte dataet. 
\\
\subsection{Enkelte indstillinger}
Vi har gjort os en række overvejelser i forbindelse med plotningen af vores data, fordi vi skal have repræsenteret vores data på en overskuelig måde. Vi kom frem til, at vi gerne ville undersøge, hvordan de enkelte indstillinger påvirker den read-out noise man får ud. Måden vi har valgt at gøre det på, er ved at lave fire forskellige plots, hvor vi i hvert plot undersøger en bestemt indstilling. 
\\
Et eksempel kunne fx være \textbf{bin-indstillingen}, hvor man gerne vil undersøge, hvad der sker, når man ændrer på bin-størrelsen. Rent plotteteknisk gøres dette ved at sortere dataet i en bestemt rækkefølge på forhånd uafhængigt af bin-indstillinge. Det betyder, at punkterne med identiske indstillinger på nær bin-indstillingen kommer til at ligge over hinanden i plottet. Derefter kan man så farvekode de forskellige bin-indstillinger, så man nemt kan se, hvordan ændringen i bins ændrer ens read-out noise. Dette kan gøres ved alle indstillinger.
\subsubsection*{Bin-Indstilling}
\includegraphics[scale=0.35]{../Plots/bins.png} 
Hvis vi kigger på de røde punkter med bin-indstilling 1x1, så kan vi se, at den generelt har den laveste read-out noise over de fleste indstillinger, udover et par enkelte punkter til sidst. Men en ting man kan bide mærke i, når man kigger på de røde punkter er, at der ikke er en specielt stor fejl på værdierne. Det giver meget god meningen, fordi bin-indstillingen indvirker netop på hvor mange datapunkter der er i hvert billede. Hvis man har et højt antal datapunkter bliver ens måling mere præcis, hvilket betyder at hvert værdien af hvert datapunkt ikke flukturerer lige så meget som højrere bin-indstillinger. Hvis man så fx kigger på 20x20-indstillingen, så er der langt færre datapunkter, hvilket vil sige, at hvert datapunkt indeholder mere information. Det betyder også, at ens data bliver mere upræcis, hvilket så netop både giver anledning til en større read-out noise, men også større fejl på read-out noisen. Værdien for et datapunkt fluktuerer netop pga. af read-out noise, hvis man så har mange punkter indeholdende mindre information, så er flukturationen ikke nær så stor som et mindre antal punkter, ind
\subsubsection*{Quality-Indstilling}
\subsubsection*{Gain-Indstilling}
\subsubsection*{Read-out-rate-Indstilling}
\subsection{Bedste indstillinger}
Udover at kigge på, hvordan de enkelte indstillinger påvirker read-out noisen, så  vil vi også gerne kigge på, hvilket sæt af indstillinger der giver den mindste read-out noise. Det vil vi gøre, ved at lave et samlet plot med alle de målte read-out noises på. Vi vil så prøve at estimere, hvilket sæt af indstillinger der giver den laveste read-out noise. De 5 bedste punkter vil vi farvekode, så de adskiller sig fra de andre. Det kunne måske være, at der var en indstilling, der var mere følsom i forhold til at inducere read-out noise. 
\\
Efter analysen kan man måske gå ind og vurdere på hvilken indstilling der er mest følsom overfor read-out noise. 

\section{Vurdering af kamera}
Efter analysen af ens data, kan man måske gå ind og vurdere på, om kameraet er godt nok til det forsøg, som man skal lave med det. Men det er ikke helt meningen med den her rapport
\end{document}
